<!-- @include ../partials/dochead.html -->
<title>matcher</title>
<link rel="stylesheet" href="/styles/shared.css" />
<link rel="stylesheet" href="/styles/matcher.css" />
</head>
<body>
  <div class="shell">
    <!-- @include ../partials/topbar.html -->

    <div class="layout">
      <!-- @include ../partials/rail.html -->

      <main id="page" class="main" tabindex="-1" aria-label="Main content">
        <section class="availability">
          <div class="availability-layout">
            <!-- LEFT: grid + bottom controls -->
            <section class="availability-left">
              <div id="grid" class="grid">
                <div id="grid-content" class="grid-content">
                  <table id="schedule-table" class="table" aria-label="Weekly availability grid">
                    <thead>
                      <tr id="header-row">
                        <th class="times-col" scope="col">Time</th>
                        <th scope="col" data-day="0"></th>
                        <th scope="col" data-day="1"></th>
                        <th scope="col" data-day="2"></th>
                        <th scope="col" data-day="3"></th>
                        <th scope="col" data-day="4"></th>
                        <th scope="col" data-day="5"></th>
                        <th scope="col" data-day="6"></th>
                      </tr>
                    </thead>
                    <tbody id="table-body"></tbody>
                  </table>
                  <div id="now-marker" class="now-marker" style="display:none"><span class="bubble">NOW</span></div>
                  <div id="cell-tooltip" class="cell-tooltip" style="display:none"></div>
                </div>
              </div>

              <!-- Bottom pane: single horizontal line (clusters) -->
              <div class="controls-pane">
                <div class="picker-controls">
                  <!-- cluster 1: week nav (Prev | Next) -->
                  <div class="cluster week-controls">
                    <button id="prev-week" type="button" aria-label="Previous week">Prev</button>
                    <button id="next-week" type="button" aria-label="Next week">Next</button>
                    <span id="week-label" class="week-label" aria-live="polite"></span>
                  </div>

                  <!-- cluster 2: username + Add -->
                  <div class="cluster add-user">
                    <input id="add-username" type="text" placeholder="username" autocomplete="off" />
                    <button id="add-user-btn" type="button">Add</button>
                  </div>

                  <!-- cluster 3: filters (labels shown at the side, two lines) -->
                  <div class="cluster filters">
                    <div class="field">
                      <label for="max-missing">max<br>missing</label>
                      <input id="max-missing" type="number" min="0" step="1" value="0" />
                    </div>
                    <div class="field">
                      <label for="min-hours">min<br>hours</label>
                      <input id="min-hours" type="number" min="0" step="0.5" value="1" />
                    </div>
                  </div>

                  <!-- cluster 4: legend (label on the same titles line) -->
                  <div class="cluster legend">
                    <div class="field legend-field">
                      <div id="legend-blocks" class="legend-blocks"></div>
                    </div>
                  </div>

                  <!-- cluster 5: sort by (same format as filters/legend) -->
                  <div class="cluster sort-by">
                    <div class="field select-field">
                      <select id="sort-method">
                        <option value="participants">Most participants</option>
                        <option value="longest">Longest first</option>
                        <option value="soonest">Soonest first</option>
                      </select>
                    </div>
                  </div>
                </div>

                <div id="member-error" class="error-text"></div>
                <ul id="member-list" class="member-list" hidden></ul>
              </div>
            </section>

            <!-- RIGHT: side cards (was Results) -->
            <aside class="availability-right">
              <section id="side-cards-panel" class="panel">
                <h3>Results</h3>
                <div id="side-cards" class="side-cards"></div>
              </section>
            </aside>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script src="/scripts/config.js" defer></script>
  <script src="/scripts/clock.js" defer></script>
  <script src="/scripts/modal.js" defer></script>
  <script src="/scripts/auth.js" defer></script>
  <script src="/scripts/login.js" defer></script>
  <script src="/scripts/settings.js" defer></script>
  <script src="/scripts/shared.js" defer></script>
  <script src="/scripts/matcher.js" defer></script>
  <script src="/scripts/username.js" defer></script>
</body>
</html>
