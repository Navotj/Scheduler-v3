<!-- @include ../partials/dochead.html -->
<title>matcher</title>
<link rel="stylesheet" href="/styles/availability.css" />
<link rel="stylesheet" href="/styles/matcher.css" />
</head>
<body>
  <div class="shell">
    <!-- @include ../partials/topbar.html -->

    <div class="layout">
      <!-- @include ../partials/rail.html -->

      <main id="page" class="main" tabindex="-1" aria-label="Main content">
        <section class="availability">
          <div class="availability-layout">
            <!-- LEFT: grid (fixed height) + bottom controls (like availability) -->
            <section class="availability-left">
              <div id="grid" class="grid">
                <div id="grid-content" class="grid-content">
                  <table id="schedule-table" class="table" aria-label="Weekly availability grid">
                    <thead>
                      <tr id="header-row">
                        <th class="times-col" scope="col">Time</th>
                        <th scope="col" data-day="0"></th>
                        <th scope="col" data-day="1"></th>
                        <th scope="col" data-day="2"></th>
                        <th scope="col" data-day="3"></th>
                        <th scope="col" data-day="4"></th>
                        <th scope="col" data-day="5"></th>
                        <th scope="col" data-day="6"></th>
                      </tr>
                    </thead>
                    <tbody id="table-body"></tbody>
                  </table>
                  <div id="now-marker" class="now-marker" aria-hidden="true"></div>
                  <div id="cell-tooltip" class="cell-tooltip" style="display:none"></div>
                </div>
              </div>

              <div class="controls-pane">
                <div class="picker-controls">
                  <!-- week nav (use availability visuals) -->
                  <div class="week-controls">
                    <button id="prev-week" type="button" aria-label="Previous week">Prev</button>
                    <span id="week-label" class="week-label" aria-live="polite"></span>
                    <button id="next-week" type="button" aria-label="Next week">Next</button>
                  </div>

                  <!-- add members -->
                  <div class="add-user">
                    <input id="add-username" type="text" placeholder="username" autocomplete="off" />
                    <button id="add-user-btn" type="button">Add</button>
                  </div>

                  <!-- filters stacked as label over input, but arranged horizontally overall -->
                  <div class="field">
                    <label for="max-missing">Max missing</label>
                    <input id="max-missing" type="number" min="0" value="0" />
                  </div>

                  <div class="field">
                    <label for="min-hours">Min length</label>
                    <div class="row">
                      <input id="min-hours" type="number" min="0.5" step="0.5" value="1" />
                      <span>h</span>
                    </div>
                  </div>

                  <div class="field">
                    <label for="sort-method">Sort by</label>
                    <select id="sort-method">
                      <option value="participants">Most participants</option>
                      <option value="longest">Longest first</option>
                      <option value="soonest">Soonest first</option>
                    </select>
                  </div>

                  <!-- legend included in the same horizontal row -->
                  <div class="legend-inline">
                    <label class="legend-label">Legend</label>
                    <div id="legend-blocks" class="legend-blocks"></div>
                  </div>
                </div>

                <div id="member-error" class="error-text"></div>
                <!-- chips (optional). keep but off the main row to preserve side-by-side layout -->
                <ul id="member-list" class="member-list" hidden></ul>
              </div>
            </section>

            <!-- RIGHT: results list -->
            <aside class="availability-right">
              <section id="results-panel" class="panel">
                <h3>Results</h3>
                <div id="results" class="results"></div>
              </section>
            </aside>
          </div>
        </section>
      </main>
    </div>
  </div>

  <script src="/scripts/config.js" defer></script>
  <script src="/scripts/clock.js" defer></script>
  <script src="/scripts/modal.js" defer></script>
  <script src="/scripts/auth.js" defer></script>
  <script src="/scripts/login.js" defer></script>
  <script src="/scripts/register.js" defer></script>
  <script src="/scripts/settings.js" defer></script>
  <script src="/scripts/matcher.js" defer></script>
</body>
</html>
