<header class="topbar">
  <nav class="topnav" aria-label="Primary">
    <a class="navbtn" href="/availability.html" aria-label="Availability" title="Availability">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <!-- Outside-only outline for overlay objects (reduced opacity) -->
          <filter id="icon-outline-availability" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Overlay: thin pen leaning RIGHT + horizontal squiggle
             Centered around calendar's bottom-right; pen partially outside.
             Squiggle extended left and ends ~1px short of the tip -->
        <g transform="translate(22,20) scale(1.2)" filter="url(#icon-outline-availability)" stroke="currentColor" fill="currentColor" stroke-linejoin="round" stroke-linecap="round">
          <!-- Squiggle baseline ~y=6.5; LAST point at x=-0.4 to leave ~1px gap to the pen tip at x=0 -->
          <path d="M -11 6.5
                   C -10 7.3, -9 7.3, -8 6.5
                   S -6 5.6, -5 6.5
                   S -3 7.4, -2 6.5
                   S  0 5.6, -0.4 6.5"
                fill="none" stroke-width="1.1"/>

          <!-- Pen: tip anchored at (0,6.5); lean right (~33deg) -->
          <g transform="translate(0,6.5) rotate(33)">
            <!-- Barrel: very thin straight rectangle -->
            <rect x="-0.55" y="-8.2" width="1.1" height="8.2" rx="0.55"/>
            <!-- Grip band -->
            <rect x="-0.65" y="-3.3" width="1.3" height="0.7" rx="0.35"/>
            <!-- Tip: sharp attached triangle -->
            <path d="M -0.55 0 L 0.55 0 L 0 2 Z"/>
            <!-- Minimal clip -->
            <path d="M 0.45 -7.2 L 1.7 -5.6" fill="none" stroke-width="0.9"/>
          </g>
        </g>
      </svg>
    </a>

    <a class="navbtn" href="/matcher.html" aria-label="Schedule matcher" title="Schedule matcher">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <filter id="icon-outline-matcher" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Magnifying glass (overlay with outline) -->
        <g transform="translate(15,15) scale(1.25)" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" filter="url(#icon-outline-matcher)">
          <circle cx="5.2" cy="5.2" r="3.8" stroke-width="1.6"/>
          <path d="M8.6 8.6l2.7 2.7" stroke-width="1.8"/>
        </g>
      </svg>
    </a>

    <a class="navbtn" href="/templates.html" aria-label="Templates" title="Templates">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <filter id="icon-outline-templates" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Stack of papers (overlay with outline) -->
        <g transform="translate(15,15) scale(1.25)" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" filter="url(#icon-outline-templates)">
          <path d="M2.2 5.8l4.2-1.8 4.2 1.8-4.2 1.8z" fill="currentColor"/>
          <path d="M3 4l4.2-1.8 4.2 1.8" fill="none" stroke-width="1.4"/>
          <path d="M2.2 5.8v2.5l4.2 1.8 4.2-1.8V5.8" fill="none" stroke-width="1.4"/>
        </g>
      </svg>
    </a>

    <button id="settings-btn" class="navbtn" type="button" aria-label="Settings" title="Settings">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm7.5-2.1a8 8 0 0 0 0-1.8l2-1.6-2-3.4-2.5 1a7.9 7.9 0 0 0-1.6-0.9l-0.4-2.6H9.9l-0.4 2.6a7.9 7.9 0 0 0-1.6 0.9l-2.5-1-2 3.4 2 1.6a8 8 0 0 0 0 1.8l-2 1.6 2 3.4 2.5-1a7.9 7.9 0 0 0 1.6 0.9l0.4 2.6h4.2l0.4-2.6a7.9 7.9 0 0 0 1.6-0.9l2.5 1 2-3.4-2-1.6Z" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <button id="auth-btn" class="navbtn navbtn--login" type="button" aria-label="Sign in" title="Sign in" data-state="anonymous">
      <svg id="auth-icon" viewBox="0 0 24 24" aria-hidden="true">
        <g data-icon="login">
          <path d="M16 4h3a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M3 12h12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M10 7l5 5-5 5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
        <g data-icon="logout" hidden>
          <path d="M5 4h3a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M8 12h9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M12 7l5 5-5 5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
      </svg>
    </button>
    <span id="auth-label" class="auth-label" aria-live="polite">not logged in</span>
  </nav>

  <span class="brand-title" aria-hidden="true">Nat20Scheduling</span>

  <a class="brand" href="/" aria-label="Home">
    <svg class="d20clock" viewBox="0 0 64 64" role="img" aria-label="Current time">
      <g class="die" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="7.751,46.000 32.000,60.000 56.249,46.000 56.249,18.000 32.000,4.000 7.751,18.000" />
        <line x1="32.000" y1="14.695" x2="56.249" y2="18.000" />
        <line x1="32.000" y1="14.695" x2="46.987" y2="40.652" />
        <line x1="32.000" y1="14.695" x2="32.000" y2="4.000" />
        <line x1="32.000" y1="14.695" x2="7.751" y2="18.000" />
        <line x1="32.000" y1="14.695" x2="17.013" y2="40.652" />
        <line x1="56.249" y1="18.000" x2="46.987" y2="40.652" />
        <line x1="56.249" y1="18.000" x2="56.249" y2="46.000" />
        <line x1="46.987" y1="40.652" x2="56.249" y2="46.000" />
        <line x1="46.987" y1="40.652" x2="32.000" y2="60.000" />
        <line x1="46.987" y1="40.652" x2="17.013" y2="40.652" />
        <line x1="6.956" y1="46.000" x2="32.000" y2="60.000" />
        <line x1="6.956" y1="46.000" x2="17.013" y2="40.652" />
        <line x1="6.956" y1="46.000" x2="7.751" y2="18.000" />
        <line x1="32.000" y1="60.000" x2="17.013" y2="40.652" />
        <line x1="32.000" y1="60.000" x2="17.013" y2="40.652" />
        <line x1="7.751" y1="18.000" x2="17.013" y2="40.652" />
      </g>
      <g class="hands">
        <line class="hour"   x1="32" y1="32" x2="32" y2="19" />
        <line class="minute" x1="32" y1="32" x2="32" y2="12" />
        <circle cx="32" cy="32" r="1.7"/>
      </g>
    </svg>
  </a>
</header>
