<header class="topbar">
  <nav class="topnav" aria-label="Primary">
    <a class="navbtn" href="/availability.html" aria-label="Availability" title="Availability">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <!-- Outside-only outline with reduced opacity -->
          <filter id="icon-outline-availability" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Bottom-right overlay: minimalist ballpoint pen (leaning right) + perfectly horizontal squiggle -->
        <g transform="translate(15,15) scale(1.25)" filter="url(#icon-outline-availability)" fill="currentColor" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <!-- Squiggle FIRST so it sits behind the pen tip; straight baseline with gentle waves -->
          <path d="M -8.5 11.8
                   C -7.6 12.4 -6.7 12.4 -5.8 11.8
                   S -4.0 10.8 -3.1 11.8
                   S -1.3 12.8 -0.4 11.8
                   S 1.4 10.8 2.3 11.8
                   S 4.1 12.8 5.0 11.8" fill="none" stroke-width="1.2"/>

          <!-- Pen group rotated to lean right -->
          <g transform="rotate(23 6 6)">
            <!-- Barrel (rounded rect) -->
            <rect x="3.2" y="1.2" width="3.0" height="7.8" rx="1.2" ry="1.2" />
            <!-- Grip band -->
            <rect x="3.0" y="5.2" width="3.4" height="0.9" rx="0.45" />
            <!-- Tip cone -->
            <path d="M3.2 9.0 L6.2 9.0 L5.0 11.0 L4.4 11.0 Z"/>
            <!-- Clip (minimalist) -->
            <path d="M6.2 2.0 L7.8 3.6 Q8.1 3.9 7.8 4.3 L7.2 5.0" fill="none" stroke-width="1.1"/>
          </g>
        </g>
      </svg>
    </a>

    <a class="navbtn" href="/matcher.html" aria-label="Schedule matcher" title="Schedule matcher">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <filter id="icon-outline-matcher" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Magnifying glass with outside outline -->
        <g transform="translate(15,15) scale(1.25)" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" filter="url(#icon-outline-matcher)">
          <circle cx="5.2" cy="5.2" r="3.8" stroke-width="1.6"/>
          <path d="M8.6 8.6l2.7 2.7" stroke-width="1.8"/>
        </g>
      </svg>
    </a>

    <a class="navbtn" href="/templates.html" aria-label="Templates" title="Templates">
      <svg viewBox="0 0 30 30" aria-hidden="true">
        <defs>
          <filter id="icon-outline-templates" filterUnits="userSpaceOnUse" x="-25%" y="-25%" width="150%" height="150%" color-interpolation-filters="sRGB">
            <feMorphology in="SourceAlpha" operator="dilate" radius="2" result="dilated"/>
            <feComposite in="dilated" in2="SourceAlpha" operator="out" result="outside"/>
            <feFlood flood-color="#000000" flood-opacity="0.5" result="color"/>
            <feComposite in="color" in2="outside" operator="in" result="outline"/>
            <feMerge>
              <feMergeNode in="outline"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>
        </defs>

        <!-- Calendar base -->
        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 2.5v3.5M21 2.5v3.5M4.5 9h21" stroke-width="1.8"/>
          <rect x="5" y="6.5" width="20" height="17.5" rx="1" stroke-width="1.8"/>
          <path d="M9.5 12.5h3.8m4 0h3.8m-11.6 5h3.8m4 0h3.8" stroke-width="1.4"/>
        </g>

        <!-- Stack of papers with outside outline -->
        <g transform="translate(15,15) scale(1.25)" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" filter="url(#icon-outline-templates)">
          <path d="M2.2 5.8l4.2-1.8 4.2 1.8-4.2 1.8z" fill="currentColor"/>
          <path d="M3 4l4.2-1.8 4.2 1.8" fill="none" stroke-width="1.4"/>
          <path d="M2.2 5.8v2.5l4.2 1.8 4.2-1.8V5.8" fill="none" stroke-width="1.4"/>
        </g>
      </svg>
    </a>


    <button id="settings-btn" class="navbtn" type="button" aria-label="Settings" title="Settings">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Zm7.5-2.1a8 8 0 0 0 0-1.8l2-1.6-2-3.4-2.5 1a7.9 7.9 0 0 0-1.6-0.9l-0.4-2.6H9.9l-0.4 2.6a7.9 7.9 0 0 0-1.6 0.9l-2.5-1-2 3.4 2 1.6a8 8 0 0 0 0 1.8l-2 1.6 2 3.4 2.5-1a7.9 7.9 0 0 0 1.6 0.9l0.4 2.6h4.2l0.4-2.6a7.9 7.9 0 0 0 1.6-0.9l2.5 1 2-3.4-2-1.6Z" fill="none" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
    </button>

    <button id="auth-btn" class="navbtn navbtn--login" type="button" aria-label="Sign in" title="Sign in" data-state="anonymous">
      <svg id="auth-icon" viewBox="0 0 24 24" aria-hidden="true">
        <g data-icon="login">
          <path d="M16 4h3a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M3 12h12" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M10 7l5 5-5 5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
        <g data-icon="logout" hidden>
          <path d="M5 4h3a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M8 12h9" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          <path d="M12 7l5 5-5 5" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </g>
      </svg>
    </button>
    <span id="auth-label" class="auth-label" aria-live="polite">not logged in</span>
  </nav>

  <span class="brand-title" aria-hidden="true">Nat20Scheduling</span>

  <a class="brand" href="/" aria-label="Home">
    <svg class="d20clock" viewBox="0 0 64 64" role="img" aria-label="Current time">
      <g class="die" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="7.751,46.000 32.000,60.000 56.249,46.000 56.249,18.000 32.000,4.000 7.751,18.000" />
        <line x1="32.000" y1="14.695" x2="56.249" y2="18.000" />
        <line x1="32.000" y1="14.695" x2="46.987" y2="40.652" />
        <line x1="32.000" y1="14.695" x2="32.000" y2="4.000" />
        <line x1="32.000" y1="14.695" x2="7.751" y2="18.000" />
        <line x1="32.000" y1="14.695" x2="17.013" y2="40.652" />
        <line x1="56.249" y1="18.000" x2="46.987" y2="40.652" />
        <line x1="56.249" y1="18.000" x2="56.249" y2="46.000" />
        <line x1="46.987" y1="40.652" x2="56.249" y2="46.000" />
        <line x1="46.987" y1="40.652" x2="32.000" y2="60.000" />
        <line x1="46.987" y1="40.652" x2="17.013" y2="40.652" />
        <line x1="6.956" y1="46.000" x2="32.000" y2="60.000" />
        <line x1="6.956" y1="46.000" x2="17.013" y2="40.652" />
        <line x1="6.956" y1="46.000" x2="7.751" y2="18.000" />
        <line x1="32.000" y1="60.000" x2="17.013" y2="40.652" />
        <line x1="32.000" y1="60.000" x2="17.013" y2="40.652" />
        <line x1="7.751" y1="18.000" x2="17.013" y2="40.652" />
      </g>
      <g class="hands">
        <line class="hour"   x1="32" y1="32" x2="32" y2="19" />
        <line class="minute" x1="32" y1="32" x2="32" y2="12" />
        <circle cx="32" cy="32" r="1.7"/>
      </g>
    </svg>
  </a>
</header>
